/*!
 * lunar.js v1.0
 * (c) 2020 Shinigami
 * Released under the MIT License.
 */
!function(t,e){"use strict";"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Lunar=e()}(this,function(){"use strict";var t=Math.PI;function e(t){return Math.floor(t)}function n(t,n,i){var r,s,a,u;return s=i+4800-(r=e((14-n)/12)),(u=t+e((153*(a=n+12*r-3)+2)/5)+365*s+e(s/4)-e(s/100)+e(s/400)-32045)<2299161&&(u=t+e((153*a+2)/5)+365*s+e(s/4)-32083),u}function i(n,i){return e(6*(a=t/180,u=357.5291+35999.0503*(r=(n-.5-i/24-2451545)/36525)-1559e-7*(s=r*r)-4.8e-7*r*s,h=280.46645+36000.76983*r+3032e-7*s+((1.9146-.004817*r-14e-6*s)*Math.sin(a*u)+(.019993-101e-6*r)*Math.sin(2*a*u)+29e-5*Math.sin(3*a*u)),h*=a,(h-=2*t*e(h/(2*t)))/t));var r,s,a,u,h}function r(n,i){return e(function(e){var n,i,r,s,a,u,h,o,c;return s=t/180,a=2415020.75933+29.53058868*e+1178e-7*(i=(n=e/1236.85)*n)-1.55e-7*(r=i*n),a+=33e-5*Math.sin((166.56+132.87*n-.009173*i)*s),u=359.2242+29.10535608*e-333e-7*i-347e-8*r,h=306.0253+385.81691806*e+.0107306*i+1236e-8*r,o=21.2964+390.67050646*e-.0016528*i-239e-8*r,c=(c=(.1734-393e-6*n)*Math.sin(u*s)+.0021*Math.sin(2*s*u))-.4068*Math.sin(h*s)+.0161*Math.sin(2*s*h),a+(c=(c=(c=(c=(c-=4e-4*Math.sin(3*s*h))+.0104*Math.sin(2*s*o)-.0051*Math.sin(s*(u+h)))-.0074*Math.sin(s*(u-h))+4e-4*Math.sin(s*(2*o+u)))-4e-4*Math.sin(s*(2*o-u))-6e-4*Math.sin(s*(2*o+h)))+.001*Math.sin(s*(2*o-h))+5e-4*Math.sin(s*(2*h+u)))-(n<-11?.001+839e-6*n+2261e-7*i-845e-8*r-8.1e-8*n*r:265e-6*n-278e-6+262e-6*i)}(n)+.5+i/24)}function s(t,s){var a,u;return i(u=r(a=e((n(31,12,t)-2415021)/29.530588853),s),s)>=9&&(u=r(a-1,s)),u}function a(t,a,u,h){var o,c,f,g,l,M,_,d,p,D,m;return(f=r((o=e(((c=n(t,a,u))-2415021.076998695)/29.530588853))+1,h))>c&&(f=r(o,h)),l=g=s(u,h),g>=f?(d=u,g=s(u-1,h)):(d=u+1,l=s(u+1,h)),M=c-f+1,p=0,_=(D=e((f-g)/29))+11,l-g>365&&D>=(m=function(t,n){var s,a,u,h;a=0,u=i(r((s=e((t-2415021.076998695)/29.530588853+.5))+(h=1),n),n);do{a=u,u=i(r(s+ ++h,n),n)}while(u!=a&&h<14);return h-1}(g,h))&&(_=D+10,D==m&&(p=1)),_>12&&(_-=12),_>=11&&D<4&&(d-=1),[M,_,d,p]}function u(t){return+t<10?"0"+t:t}function h(t,e,n,i){var r,s,u=arguments.length;if(Number.isNaN(+t)?r=void 0===t?new Date:new Date(t):(u<3&&(n=(new Date).getFullYear()),u<2&&(e=(new Date).getMonth()),u<1&&(t=(new Date).getDate()),r=new Date([e,t,n].join("/"))),u<4&&(i=+(s=(r||new Date).toString().match(/GMT([\+\-]\d+)/)[1]).slice(0,3)+s.slice(3)/60),!this||!0!==this._isLunar)return a(r.getDate(),r.getMonth()+1,r.getFullYear(),i);this._=a(r.getDate(),r.getMonth()+1,r.getFullYear(),i)}return h.prototype={_isLunar:!0,format:function(t){return"string"==typeof t?t.replace(/dd/g,u(this._[0])).replace(/mm/g,u(this._[1])).replace(/yy/g,this._[2]).replace(/d/g,this._[0]).replace(/m/g,this._[1]).replace(/y/g,(this._[2]+"").slice(2)):""},getDate:function(){return this._[0]},getMonth:function(){return this._[1]},getYear:function(){return(this._[2]+"").slice(2)},getFullYear:function(){return this._[2]},toString:function(){return this._.slice(0,3).join("/")},get 0(){return this._[0]},set 0(t){this._[0]=t},get 1(){return this._[1]},set 1(t){this._[1]=t},get 2(){return this._[2]},set 2(t){this._[2]=t},get 3(){return this._[3]},set 3(t){this._[3]=t}},h});
